{"ast":null,"code":"import _regeneratorRuntime from\"/home/workspace/reactjs/coding-practices/enhancementOfJobbyApp/node_modules/.pnpm/@babel+runtime@7.24.5/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/workspace/reactjs/coding-practices/enhancementOfJobbyApp/node_modules/.pnpm/@babel+runtime@7.24.5/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/workspace/reactjs/coding-practices/enhancementOfJobbyApp/node_modules/.pnpm/@babel+runtime@7.24.5/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/workspace/reactjs/coding-practices/enhancementOfJobbyApp/node_modules/.pnpm/@babel+runtime@7.24.5/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _callSuper from\"/home/workspace/reactjs/coding-practices/enhancementOfJobbyApp/node_modules/.pnpm/@babel+runtime@7.24.5/node_modules/@babel/runtime/helpers/esm/callSuper.js\";import _inherits from\"/home/workspace/reactjs/coding-practices/enhancementOfJobbyApp/node_modules/.pnpm/@babel+runtime@7.24.5/node_modules/@babel/runtime/helpers/esm/inherits.js\";import{Component}from'react';import Cookies from'js-cookie';import{Redirect}from'react-router-dom';import'./index.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";var LoginPage=/*#__PURE__*/function(_Component){function LoginPage(){var _this;_classCallCheck(this,LoginPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_callSuper(this,LoginPage,[].concat(args));_this.state={username:'',password:'',showErrorMsg:false,errorMsg:''};_this.onSuccessfulLogin=function(jwtToken){Cookies.set('jwt_token',jwtToken,{expires:30});var history=_this.props.history;history.replace('/');};_this.onFailureLogin=function(errorMsg){_this.setState({errorMsg:errorMsg,showErrorMsg:true});};_this.onSubmitForm=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var _this$state,username,password,userDetail,loginApiUrl,options,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();_this$state=_this.state,username=_this$state.username,password=_this$state.password;userDetail={username:username,password:password};loginApiUrl='https://apis.ccbp.in/login';options={method:'POST',body:JSON.stringify(userDetail)};_context.next=7;return fetch(loginApiUrl,options);case 7:response=_context.sent;_context.next=10;return response.json();case 10:data=_context.sent;console.log(data);if(response.ok){_this.onSuccessfulLogin(data.jwt_token);}else{_this.onFailureLogin(data.error_msg);}case 13:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.updateUsername=function(event){return _this.setState({username:event.target.value});};_this.updatePassword=function(event){return _this.setState({password:event.target.value});};_this.renderUsernameField=function(){var username=_this.state.username;return/*#__PURE__*/_jsxs(\"div\",{className:\"input-field-container\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",className:\"login-input-label\",children:\"USERNAME\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,className:\"login-input-field\",placeholder:\"Username\",id:\"username\",onChange:_this.updateUsername})]});};_this.renderPasswordField=function(){var password=_this.state.password;return/*#__PURE__*/_jsxs(\"div\",{className:\"input-field-container\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"login-input-label\",children:\"PASSWORD\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,className:\"login-input-field\",placeholder:\"Password\",id:\"password\",onChange:_this.updatePassword})]});};return _this;}_inherits(LoginPage,_Component);return _createClass(LoginPage,[{key:\"render\",value:function render(){var _this$state2=this.state,showErrorMsg=_this$state2.showErrorMsg,errorMsg=_this$state2.errorMsg;var jwtToken=Cookies.get('jwt_token');if(jwtToken!==undefined){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"login-form\",onSubmit:this.onSubmitForm,children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://assets.ccbp.in/frontend/react-js/logo-img.png\",alt:\"website logo\",className:\"website-logo-login-form\"}),this.renderUsernameField(),this.renderPasswordField(),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login-button\",children:\"Login\"}),showErrorMsg&&/*#__PURE__*/_jsxs(\"p\",{className:\"error-msg\",children:[\"*\",errorMsg]})]})]})});}}]);}(Component);export default LoginPage;","map":{"version":3,"names":["Component","Cookies","Redirect","jsx","_jsx","jsxs","_jsxs","LoginPage","_Component","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_callSuper","concat","state","username","password","showErrorMsg","errorMsg","onSuccessfulLogin","jwtToken","set","expires","history","props","replace","onFailureLogin","setState","onSubmitForm","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","_this$state","userDetail","loginApiUrl","options","response","data","wrap","_callee$","_context","prev","next","preventDefault","method","body","JSON","stringify","fetch","sent","json","console","log","ok","jwt_token","error_msg","stop","_x","apply","updateUsername","target","value","updatePassword","renderUsernameField","className","children","htmlFor","type","placeholder","id","onChange","renderPasswordField","_inherits","_createClass","key","render","_this$state2","get","undefined","to","onSubmit","src","alt"],"sources":["/home/workspace/reactjs/coding-practices/enhancementOfJobbyApp/src/components/Login/index.js"],"sourcesContent":["import {Component} from 'react'\nimport Cookies from 'js-cookie'\nimport {Redirect} from 'react-router-dom'\nimport './index.css'\n\nclass LoginPage extends Component {\n  state = {username: '', password: '', showErrorMsg: false, errorMsg: ''}\n\n  onSuccessfulLogin = jwtToken => {\n    Cookies.set('jwt_token', jwtToken, {expires: 30})\n    const {history} = this.props\n    history.replace('/')\n  }\n\n  onFailureLogin = errorMsg => {\n    this.setState({errorMsg, showErrorMsg: true})\n  }\n\n  onSubmitForm = async event => {\n    event.preventDefault()\n    const {username, password} = this.state\n\n    const userDetail = {username, password}\n\n    const loginApiUrl = 'https://apis.ccbp.in/login'\n    const options = {\n      method: 'POST',\n      body: JSON.stringify(userDetail),\n    }\n\n    const response = await fetch(loginApiUrl, options)\n    const data = await response.json()\n    console.log(data)\n\n    if (response.ok) {\n      this.onSuccessfulLogin(data.jwt_token)\n    } else {\n      this.onFailureLogin(data.error_msg)\n    }\n  }\n\n  updateUsername = event => this.setState({username: event.target.value})\n\n  updatePassword = event => this.setState({password: event.target.value})\n\n  renderUsernameField = () => {\n    const {username} = this.state\n    return (\n      <div className=\"input-field-container\">\n        <label htmlFor=\"username\" className=\"login-input-label\">\n          USERNAME\n        </label>\n        <input\n          type=\"text\"\n          value={username}\n          className=\"login-input-field\"\n          placeholder=\"Username\"\n          id=\"username\"\n          onChange={this.updateUsername}\n        />\n      </div>\n    )\n  }\n\n  renderPasswordField = () => {\n    const {password} = this.state\n    return (\n      <div className=\"input-field-container\">\n        <label htmlFor=\"password\" className=\"login-input-label\">\n          PASSWORD\n        </label>\n        <input\n          type=\"password\"\n          value={password}\n          className=\"login-input-field\"\n          placeholder=\"Password\"\n          id=\"password\"\n          onChange={this.updatePassword}\n        />\n      </div>\n    )\n  }\n\n  render() {\n    const {showErrorMsg, errorMsg} = this.state\n    const jwtToken = Cookies.get('jwt_token')\n    if (jwtToken !== undefined) {\n      return <Redirect to=\"/\" />\n    }\n    return (\n      <div className=\"login-container\">\n        <form className=\"login-form\" onSubmit={this.onSubmitForm}>\n          <img\n            src=\"https://assets.ccbp.in/frontend/react-js/logo-img.png\"\n            alt=\"website logo\"\n            className=\"website-logo-login-form\"\n          />\n          {this.renderUsernameField()}\n          {this.renderPasswordField()}\n          <div>\n            <button type=\"submit\" className=\"login-button\">\n              Login\n            </button>\n            {showErrorMsg && <p className=\"error-msg\">*{errorMsg}</p>}\n          </div>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport default LoginPage\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}